{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///rudy-captcha.js","webpack:///webpack/bootstrap 609a76879aeb041e753b","webpack:///./libs/index.js","webpack:///./libs/src/main.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","value","_main","_main2","obj","default","Captch","install","Vue","component","window","props","width","type","Number","height","bgColor","String","captchaCodes","colors","Array","fontFamily","fontSizeMin","fontSizeMax","codeLength","textFuzzy","lineColorMax","lineColorMin","lineColorOpacity","lineFuzzy","lineWidth","lineNumber","dotColorMax","dotColorMin","dotColorOpacity","dotFuzzy","dotNumber","dotR","data","captchaCode","render","h","style","display","font-size","ref","attrs","on","click","updateCode","backgroundColor","mounted","ctx","$refs","rudyCaptcha","getContext","methods","refreshCode","drawLine","drawDot","drawImg","randomNum","length","min","max","Math","floor","random","randomRgbColor","randomRgbaColor","opacity","textAlign","textBaseline","drawText","txt","shadowColor","shadowBlur","shadowOffsetY","fontSize","font","x","diff","y","abs","deg","translate","rotate","PI","fillText","strokeText","valid","code","toLocaleLowerCase","beginPath","startX","startY","moveTo","endX","endY","lineTo","stroke","arc","fill"],"mappings":"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","file":"rudy-captcha.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"rudy-captcha\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rudy-captcha\"] = factory();\n\telse\n\t\troot[\"rudy-captcha\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"rudy-captcha\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"rudy-captcha\"] = factory();\n\telse\n\t\troot[\"rudy-captcha\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"./dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _main = __webpack_require__(1);\n\nvar _main2 = _interopRequireDefault(_main);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_main2.default.install = function (Vue) {\n  Vue.component(_main2.default.name, _main2.default);\n};\n\nif (typeof window !== 'undefined' && window.Vue) {\n  _main2.default.install(window.Vue);\n}\n\nexports.default = _main2.default;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* istanbul ignore next */\nexports.default = {\n  name: \"RudyCaptcha\",\n\n  props: {\n    width: {\n      type: Number,\n      default: 82\n    },\n    height: {\n      type: Number,\n      default: 38\n    },\n    bgColor: {\n      type: String,\n      default: '#ffffff'\n    },\n    captchaCodes: {\n      type: String,\n      default: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'\n    },\n    colors: {\n      type: Array,\n      default: function _default() {\n        return ['red', 'orange', 'green', 'blue', 'purple'];\n      }\n    },\n    fontFamily: {\n      type: String,\n      default: '微软雅黑 Arial'\n    },\n    fontSizeMin: {\n      type: Number,\n      default: 12\n    },\n    fontSizeMax: {\n      type: Number,\n      default: 38\n    },\n    codeLength: {\n      type: Number,\n      default: 4\n    },\n    textFuzzy: {\n      type: Number,\n      default: 3\n    },\n    lineColorMax: {\n      type: Number,\n      default: 200\n    },\n    lineColorMin: {\n      type: Number,\n      default: 30\n    },\n    lineColorOpacity: {\n      type: Number,\n      default: .2\n    },\n    lineFuzzy: {\n      type: Number,\n      default: 3\n    },\n    lineWidth: {\n      type: Number,\n      default: 10\n    },\n    lineNumber: {\n      type: Number,\n      default: 0\n    },\n    dotColorMax: {\n      type: Number,\n      default: 200\n    },\n    dotColorMin: {\n      type: Number,\n      default: 30\n    },\n    dotColorOpacity: {\n      type: Number,\n      default: .2\n    },\n    dotFuzzy: {\n      type: Number,\n      default: 10\n    },\n    dotNumber: {\n      type: Number,\n      default: 30\n    },\n    dotR: {\n      type: Number,\n      default: 0\n    }\n  },\n\n  data: function data() {\n    return {\n      captchaCode: ''\n    };\n  },\n  render: function render(h) {\n    var style = {\n      'display': 'inline-block',\n      'font-size': 0\n    };\n    var canvas = h('canvas', {\n      ref: 'rudyCaptcha',\n      attrs: { width: this.width,\n        height: this.height\n      },\n      on: {\n        'click': this.updateCode\n      },\n\n      style: { backgroundColor: this.bgColor }\n    });\n    return h(\"div\", {\n      style: style\n    }, [canvas]);\n  },\n  mounted: function mounted() {\n    this.ctx = this.$refs.rudyCaptcha.getContext('2d');\n    this.updateCode();\n  },\n\n\n  methods: {\n    updateCode: function updateCode() {\n      this.refreshCode();\n      this.$refs.rudyCaptcha.width = this.width;\n      this.$refs.rudyCaptcha.height = this.height;\n      // this.ctx.fillStyle = this.bgColor;\n      // this.ctx.fillRect(0, 0, this.width, this.height);\n\n      this.drawLine();\n      this.drawDot();\n      this.drawImg();\n    },\n    refreshCode: function refreshCode() {\n      this.captchaCode = \"\";\n      for (var i = 0; i < this.codeLength; i++) {\n        this.captchaCode += this.captchaCodes[this.randomNum(0, this.captchaCodes.length)];\n      }\n    },\n    randomNum: function randomNum(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    },\n    randomRgbColor: function randomRgbColor(min, max) {\n      var r = this.randomNum(min, max);\n      var g = this.randomNum(min, max);\n      var b = this.randomNum(min, max);\n      return 'rgb(' + r + ',' + g + ',' + b + ')';\n    },\n    randomRgbaColor: function randomRgbaColor(min, max, opacity) {\n      var r = this.randomNum(min, max);\n      var g = this.randomNum(min, max);\n      var b = this.randomNum(min, max);\n      return 'rgb(' + r + ',' + g + ',' + b + ', ' + opacity + ')';\n    },\n    drawImg: function drawImg() {\n      this.ctx.textAlign = \"center\";\n      this.ctx.textBaseline = \"middle\";\n      this.ctx.lineWidth = 1;\n      for (var i = 0; i < this.codeLength; i++) {\n        this.drawText(this.captchaCode[i], i);\n      }\n    },\n    drawText: function drawText(txt, i) {\n      var ctx = this.ctx;\n      ctx.shadowColor = this.colors[this.randomNum(0, this.colors.length)];\n      ctx.shadowBlur = this.randomNum(0, this.textFuzzy);\n      ctx.shadowOffsetY = this.height;\n      var fontSize = this.randomNum(this.fontSizeMin, this.fontSizeMax);\n\n      ctx.font = fontSize + 'px ' + this.fontFamily;\n\n      var x = (i + 1) * (this.width / (this.codeLength + 1));\n      var diff = (this.height - fontSize - 6) / 2;\n      var y = this.height / 2 - this.height;\n      y += this.randomNum(-Math.abs(diff) + 3, Math.abs(diff) + 3);\n      var deg = this.randomNum(-45, 45);\n      // 修改坐标原点和旋转角度\n      ctx.translate(x, y);\n      ctx.rotate(deg * Math.PI / 180);\n      i % 2 ? ctx.fillText(txt, 0, 0) : ctx.strokeText(txt, 0, 0);\n      // 恢复坐标原点和旋转角度\n      ctx.rotate(-deg * Math.PI / 180);\n      ctx.translate(-x, -y);\n    },\n    valid: function valid(code) {\n      return code.toLocaleLowerCase() === this.captchaCode.toLocaleLowerCase();\n    },\n    drawLine: function drawLine() {\n      // 绘制干扰线\n      var ctx = this.ctx;\n      // debugger;\n      for (var i = 0; i < this.lineNumber; i++) {\n        ctx.beginPath();\n\n        ctx.shadowColor = this.randomRgbaColor(this.lineColorMin, this.lineColorMax, this.lineColorOpacity);\n        ctx.shadowBlur = this.randomNum(0, this.lineFuzzy);\n        ctx.shadowOffsetY = this.height;\n        ctx.lineWidth = this.randomNum(2, this.lineWidth);\n\n        var startX = this.randomNum(0, this.width);\n        var startY = this.randomNum(0, this.height) - this.height;\n        ctx.moveTo(startX, startY);\n\n        var endX = this.randomNum(0, this.width);\n        var endY = this.randomNum(0, this.height) - this.height;\n        ctx.lineTo(endX, endY);\n\n        ctx.stroke();\n      }\n    },\n    drawDot: function drawDot() {\n      var ctx = this.ctx;\n      // 绘制干扰点\n      for (var i = 0; i < this.dotNumber; i++) {\n        ctx.shadowColor = this.randomRgbaColor(this.dotColorMin, this.dotColorMax, this.dotColorOpacity);\n        ctx.shadowBlur = this.randomNum(0, this.dotFuzzy);\n        ctx.shadowOffsetY = this.height;\n\n        ctx.beginPath();\n        var x = this.randomNum(0, this.width);\n        var y = this.randomNum(0, this.height) - this.height;\n        ctx.arc(x, y, this.randomNum(1, this.dotR), 0, 2 * Math.PI);\n        ctx.fill();\n      }\n    }\n  }\n};\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// rudy-captcha.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 609a76879aeb041e753b","import Captch from './src/main.js';\r\n\r\nCaptch.install = (Vue) => {\r\n  Vue.component(Captch.name, Captch)\r\n}\r\n\r\nif (typeof window !== 'undefined' && window.Vue) {\r\n  Captch.install(window.Vue)\r\n}\r\n\r\nexport default Captch;\n\n\n// WEBPACK FOOTER //\n// ./libs/index.js","/* istanbul ignore next */\r\nexport default {\r\n  name: \"RudyCaptcha\",\r\n\r\n  props: {\r\n    width: {\r\n      type: Number,\r\n      default: 82\r\n    },\r\n    height: {\r\n      type: Number,\r\n      default: 38\r\n    },\r\n    bgColor: {\r\n      type: String,\r\n      default: '#ffffff'\r\n    },\r\n    captchaCodes: {\r\n      type: String,\r\n      default: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'\r\n    },\r\n    colors: {\r\n      type: Array,\r\n      default () {\r\n        return ['red', 'orange', 'green', 'blue', 'purple']\r\n      }\r\n    },\r\n    fontFamily: {\r\n      type: String,\r\n      default: '微软雅黑 Arial'\r\n    },\r\n    fontSizeMin: {\r\n      type: Number,\r\n      default: 12\r\n    },\r\n    fontSizeMax: {\r\n      type: Number,\r\n      default: 38\r\n    },\r\n    codeLength: {\r\n      type: Number,\r\n      default: 4\r\n    },\r\n    textFuzzy: {\r\n      type: Number,\r\n      default: 3\r\n    },\r\n    lineColorMax: {\r\n      type: Number,\r\n      default: 200\r\n    },\r\n    lineColorMin: {\r\n      type: Number,\r\n      default: 30\r\n    },\r\n    lineColorOpacity: {\r\n      type: Number,\r\n      default: .2\r\n    },\r\n    lineFuzzy: {\r\n      type: Number,\r\n      default: 3\r\n    },\r\n    lineWidth: {\r\n      type: Number,\r\n      default: 10\r\n    },\r\n    lineNumber: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    dotColorMax: {\r\n      type: Number,\r\n      default: 200\r\n    },\r\n    dotColorMin: {\r\n      type: Number,\r\n      default: 30\r\n    },\r\n    dotColorOpacity: {\r\n      type: Number,\r\n      default: .2\r\n    },\r\n    dotFuzzy: {\r\n      type: Number,\r\n      default: 10\r\n    },\r\n    dotNumber: {\r\n      type: Number,\r\n      default: 30\r\n    },\r\n    dotR: {\r\n      type: Number,\r\n      default: 0\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      captchaCode: ''\r\n    };\r\n  },\r\n\r\n  render(h) {\r\n    const style = {\r\n      'display': 'inline-block',\r\n      'font-size': 0\r\n    }\r\n    const canvas = (\r\n      <canvas\r\n        ref=\"rudyCaptcha\"\r\n        width={this.width}\r\n        height={this.height}\r\n        onClick={this.updateCode}\r\n        style={{backgroundColor: this.bgColor}}\r\n      ></canvas>\r\n    )\r\n    return h(\r\n      \"div\",\r\n      {\r\n        style: style\r\n      },\r\n      [canvas]\r\n    );\r\n  },\r\n\r\n  mounted() {\r\n    this.ctx = this.$refs.rudyCaptcha.getContext('2d');\r\n    this.updateCode();\r\n  },\r\n\r\n  methods: {\r\n    updateCode () {\r\n      this.refreshCode ();\r\n      this.$refs.rudyCaptcha.width = this.width;\r\n      this.$refs.rudyCaptcha.height = this.height;\r\n      // this.ctx.fillStyle = this.bgColor;\r\n      // this.ctx.fillRect(0, 0, this.width, this.height);\r\n\r\n      this.drawLine();\r\n      this.drawDot();\r\n      this.drawImg();\r\n      \r\n    },\r\n    refreshCode () {\r\n      this.captchaCode = \"\";\r\n      for (let i = 0; i < this.codeLength; i++) {\r\n        this.captchaCode += this.captchaCodes[this.randomNum(0, this.captchaCodes.length)]\r\n      }\r\n    },\r\n    randomNum (min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    },\r\n    randomRgbColor (min, max) {\r\n      let r = this.randomNum(min, max)\r\n      let g = this.randomNum(min, max)\r\n      let b = this.randomNum(min, max)\r\n      return `rgb(${r},${g},${b})`\r\n    },\r\n    randomRgbaColor (min, max, opacity) {\r\n      let r = this.randomNum(min, max)\r\n      let g = this.randomNum(min, max)\r\n      let b = this.randomNum(min, max)\r\n      return `rgb(${r},${g},${b}, ${opacity})`\r\n    },\r\n    drawImg () {\r\n      this.ctx.textAlign = \"center\";\r\n      this.ctx.textBaseline = \"middle\";\r\n      this.ctx.lineWidth = 1;\r\n      for(let i = 0; i < this.codeLength; i++){\r\n        this.drawText(this.captchaCode[i], i);\r\n      }\r\n\r\n    },\r\n    drawText (txt, i) {\r\n      let ctx = this.ctx;\r\n      ctx.shadowColor = this.colors[this.randomNum(0, this.colors.length)];\r\n      ctx.shadowBlur = this.randomNum(0, this.textFuzzy);\r\n      ctx.shadowOffsetY = this.height;\r\n      let fontSize = this.randomNum(this.fontSizeMin, this.fontSizeMax);\r\n      \r\n      ctx.font = `${fontSize}px ${this.fontFamily}`;\r\n\r\n      let x = (i + 1) * (this.width / (this.codeLength + 1));\r\n      let diff = (this.height - fontSize - 6) / 2;\r\n      let y = this.height / 2 - this.height;\r\n      y+= this.randomNum(-Math.abs(diff) + 3,Math.abs(diff) + 3);\r\n      var deg = this.randomNum(-45, 45);\r\n      // 修改坐标原点和旋转角度\r\n      ctx.translate(x, y);\r\n      ctx.rotate(deg * Math.PI / 180);\r\n      i % 2 ? ctx.fillText(txt, 0, 0): ctx.strokeText(txt, 0, 0);\r\n      // 恢复坐标原点和旋转角度\r\n      ctx.rotate(-deg * Math.PI / 180);\r\n      ctx.translate(-x, -y);\r\n    },\r\n    valid (code) {\r\n      return code.toLocaleLowerCase() === this.captchaCode.toLocaleLowerCase();\r\n    },\r\n    drawLine () {\r\n      // 绘制干扰线\r\n      let ctx = this.ctx\r\n      // debugger;\r\n      for (let i = 0; i < this.lineNumber; i++) {\r\n        ctx.beginPath()\r\n\r\n        ctx.shadowColor = this.randomRgbaColor(this.lineColorMin, this.lineColorMax, this.lineColorOpacity);\r\n        ctx.shadowBlur = this.randomNum(0, this.lineFuzzy);\r\n        ctx.shadowOffsetY = this.height;\r\n        ctx.lineWidth = this.randomNum(2, this.lineWidth);\r\n\r\n        let startX = this.randomNum(0, this.width);\r\n        let startY = this.randomNum(0, this.height) - this.height;\r\n        ctx.moveTo(startX, startY);\r\n\r\n        let endX = this.randomNum(0, this.width);\r\n        let endY = this.randomNum(0, this.height) - this.height;\r\n        ctx.lineTo(endX, endY);\r\n\r\n        ctx.stroke()\r\n      }\r\n    },\r\n    \r\n    drawDot () {\r\n      let ctx = this.ctx\r\n      // 绘制干扰点\r\n      for (let i = 0; i < this.dotNumber; i++) {\r\n        ctx.shadowColor = this.randomRgbaColor(this.dotColorMin, this.dotColorMax, this.dotColorOpacity);\r\n        ctx.shadowBlur = this.randomNum(0, this.dotFuzzy);\r\n        ctx.shadowOffsetY = this.height;\r\n\r\n        ctx.beginPath();\r\n        let x = this.randomNum(0, this.width)\r\n        let y = this.randomNum(0, this.height) - this.height\r\n        ctx.arc(x, y, this.randomNum(1, this.dotR), 0, 2 * Math.PI);\r\n        ctx.fill();\r\n      }\r\n    }\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./libs/src/main.js"],"sourceRoot":""}