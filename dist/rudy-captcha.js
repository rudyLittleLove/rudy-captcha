!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("rudy-captcha",[],e):"object"==typeof exports?exports["rudy-captcha"]=e():t["rudy-captcha"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(i){if(o[i])return o[i].exports;var r=o[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./dist/",e(e.s=0)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),r=function(t){return t&&t.__esModule?t:{default:t}}(i);r.default.install=function(t){t.component(r.default.name,r.default)},"undefined"!=typeof window&&window.Vue&&r.default.install(window.Vue),e.default=r.default},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"RudyCaptcha",props:{width:{type:Number,default:82},height:{type:Number,default:38},bgColor:{type:String,default:"#ffffff"},captchaCodes:{type:String,default:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"},colors:{type:Array,default:function(){return["red","orange","green","blue","purple"]}},fontFamily:{type:String,default:"微软雅黑 Arial"},fontSizeMin:{type:Number,default:12},fontSizeMax:{type:Number,default:38},codeLength:{type:Number,default:4},textFuzzy:{type:Number,default:3},lineColorMax:{type:Number,default:200},lineColorMin:{type:Number,default:30},lineColorOpacity:{type:Number,default:.2},lineFuzzy:{type:Number,default:3},lineWidth:{type:Number,default:10},lineNumber:{type:Number,default:0},dotColorMax:{type:Number,default:200},dotColorMin:{type:Number,default:30},dotColorOpacity:{type:Number,default:.2},dotFuzzy:{type:Number,default:10},dotNumber:{type:Number,default:30},dotR:{type:Number,default:0}},data:function(){return{captchaCode:""}},render:function(t){return t("div",{style:{display:"inline-block","font-size":0}},[t("canvas",{ref:"rudyCaptcha",attrs:{width:this.width,height:this.height},on:{click:this.updateCode},style:{backgroundColor:this.bgColor}})])},mounted:function(){this.ctx=this.$refs.rudyCaptcha.getContext("2d"),this.updateCode()},methods:{updateCode:function(){this.refreshCode(),this.$refs.rudyCaptcha.width=this.width,this.$refs.rudyCaptcha.height=this.height,this.drawLine(),this.drawDot(),this.drawImg()},refreshCode:function(){this.captchaCode="";for(var t=0;t<this.codeLength;t++)this.captchaCode+=this.captchaCodes[this.randomNum(0,this.captchaCodes.length)]},randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomRgbColor:function(t,e){return"rgb("+this.randomNum(t,e)+","+this.randomNum(t,e)+","+this.randomNum(t,e)+")"},randomRgbaColor:function(t,e,o){return"rgb("+this.randomNum(t,e)+","+this.randomNum(t,e)+","+this.randomNum(t,e)+", "+o+")"},drawImg:function(){this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.lineWidth=1;for(var t=0;t<this.codeLength;t++)this.drawText(this.captchaCode[t],t)},drawText:function(t,e){var o=this.ctx;o.shadowColor=this.colors[this.randomNum(0,this.colors.length)],o.shadowBlur=this.randomNum(0,this.textFuzzy),o.shadowOffsetY=this.height;var i=this.randomNum(this.fontSizeMin,this.fontSizeMax);o.font=i+"px "+this.fontFamily;var r=(e+1)*(this.width/(this.codeLength+1)),a=(this.height-i-6)/2,h=this.height/2-this.height;h+=this.randomNum(3-Math.abs(a),Math.abs(a)+3);var n=this.randomNum(-45,45);o.translate(r,h),o.rotate(n*Math.PI/180),e%2?o.fillText(t,0,0):o.strokeText(t,0,0),o.rotate(-n*Math.PI/180),o.translate(-r,-h)},valid:function(t){return t.toLocaleLowerCase()===this.captchaCode.toLocaleLowerCase()},drawLine:function(){for(var t=this.ctx,e=0;e<this.lineNumber;e++){t.beginPath(),t.shadowColor=this.randomRgbaColor(this.lineColorMin,this.lineColorMax,this.lineColorOpacity),t.shadowBlur=this.randomNum(0,this.lineFuzzy),t.shadowOffsetY=this.height,t.lineWidth=this.randomNum(2,this.lineWidth);var o=this.randomNum(0,this.width),i=this.randomNum(0,this.height)-this.height;t.moveTo(o,i);var r=this.randomNum(0,this.width),a=this.randomNum(0,this.height)-this.height;t.lineTo(r,a),t.stroke()}},drawDot:function(){for(var t=this.ctx,e=0;e<this.dotNumber;e++){t.shadowColor=this.randomRgbaColor(this.dotColorMin,this.dotColorMax,this.dotColorOpacity),t.shadowBlur=this.randomNum(0,this.dotFuzzy),t.shadowOffsetY=this.height,t.beginPath();var o=this.randomNum(0,this.width),i=this.randomNum(0,this.height)-this.height;t.arc(o,i,this.randomNum(1,this.dotR),0,2*Math.PI),t.fill()}}}}}])});
//# sourceMappingURL=rudy-captcha.js.map