!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("rudy-captch",[],e):"object"==typeof exports?exports["rudy-captch"]=e():t["rudy-captch"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(o){if(i[o])return i[o].exports;var r=i[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./dist/",e(e.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i(1),r=function(t){return t&&t.__esModule?t:{default:t}}(o);r.default.install=function(t){t.component(r.default.name,r.default)},"undefined"!=typeof window&&window.Vue&&r.default.install(window.Vue),e.default=r.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"RudyCaptcha",props:{width:{type:Number,default:282},height:{type:Number,default:38},bgColor:{type:String,default:"#ffffff"},captchaCodes:{type:String,default:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"},colors:{type:Array,default:function(){return["red","orange","green","blue","purple"]}},fontFamily:{type:String,default:"微软雅黑 Arial"},fontSizeMin:{type:Number,default:12},fontSizeMax:{type:Number,default:38},codeLength:{type:Number,default:13},textFuzzy:{type:Number,default:3},lineColorMax:{type:Number,default:200},lineColorMin:{type:Number,default:30},lineColorOpacity:{type:Number,default:.2},lineFuzzy:{type:Number,default:3},lineWidth:{type:Number,default:10},lineNumber:{type:Number,default:0},dotColorMax:{type:Number,default:200},dotColorMin:{type:Number,default:30},dotColorOpacity:{type:Number,default:.2},dotFuzzy:{type:Number,default:10},dotNumber:{type:Number,default:30},dotR:{type:Number,default:10}},data:function(){return{captchaCode:""}},render:function(t){return t("div",{style:{display:"inline-block","font-size":0}},[t("canvas",{ref:"rudyCaptcha",attrs:{width:this.width,height:this.height},on:{click:this.updateCode}})])},mounted:function(){this.ctx=this.$refs.rudyCaptcha.getContext("2d"),this.updateCode()},methods:{updateCode:function(){this.refreshCode(),this.$refs.rudyCaptcha.width=this.width,this.$refs.rudyCaptcha.height=this.height,this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.width,this.height),this.drawLine(),this.drawDot(),this.drawImg()},refreshCode:function(){this.captchaCode="";for(var t=0;t<this.codeLength;t++)this.captchaCode+=this.captchaCodes[this.randomNum(0,this.captchaCodes.length)]},randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomRgbColor:function(t,e){return"rgb("+this.randomNum(t,e)+","+this.randomNum(t,e)+","+this.randomNum(t,e)+")"},randomRgbaColor:function(t,e,i){return"rgb("+this.randomNum(t,e)+","+this.randomNum(t,e)+","+this.randomNum(t,e)+", "+i+")"},drawImg:function(){this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.ctx.lineWidth=1;for(var t=0;t<this.codeLength;t++)this.drawText(this.captchaCode[t],t)},drawText:function(t,e){var i=this.ctx;i.shadowColor=this.colors[this.randomNum(0,this.colors.length)],i.shadowBlur=this.randomNum(0,this.textFuzzy),i.shadowOffsetY=this.height;var o=this.randomNum(this.fontSizeMin,this.fontSizeMax);i.font=o+"px "+this.fontFamily;var r=(e+1)*(this.width/(this.codeLength+1)),h=(this.height-o-6)/2,a=this.height/2-this.height;a+=this.randomNum(3-Math.abs(h),Math.abs(h)+3);var n=this.randomNum(-45,45);i.translate(r,a),i.rotate(n*Math.PI/180),e%2?i.fillText(t,0,0):i.strokeText(t,0,0),i.rotate(-n*Math.PI/180),i.translate(-r,-a)},valid:function(t){return t.toLocaleLowerCase()===this.captchaCode.toLocaleLowerCase()},drawLine:function(){for(var t=this.ctx,e=0;e<this.lineNumber;e++){t.beginPath(),t.shadowColor=this.randomRgbaColor(this.lineColorMin,this.lineColorMax,this.lineColorOpacity),t.shadowBlur=this.randomNum(0,this.lineFuzzy),t.shadowOffsetY=this.height,t.lineWidth=this.randomNum(2,this.lineWidth);var i=this.randomNum(0,this.width),o=this.randomNum(0,this.height)-this.height;t.moveTo(i,o);var r=this.randomNum(0,this.width),h=this.randomNum(0,this.height)-this.height;t.lineTo(r,h),t.stroke()}},drawDot:function(){for(var t=this.ctx,e=0;e<this.dotNumber;e++){t.shadowColor=this.randomRgbaColor(this.dotColorMin,this.dotColorMax,this.dotColorOpacity),t.shadowBlur=this.randomNum(0,this.dotFuzzy),t.shadowOffsetY=this.height,t.beginPath();var i=this.randomNum(0,this.width),o=this.randomNum(0,this.height)-this.height;t.arc(i,o,this.randomNum(1,this.dotR),0,2*Math.PI),t.fill()}}}}}])});
//# sourceMappingURL=rudy-captch.js.map